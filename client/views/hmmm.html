<head>
  <title>Course Board (restructured)</title>
</head>

<body>

  <div id="mainmenu">
    {{> mainmenu}}
  </div>
  <div id="outer">
    {{> maincontent}}
  </div>
  <div id="login">            
    {{loginButtons align="right"}}
  </div>
</body>


<template name="mainmenu">
	<span><a href="/">Home</a>  </span>
	<span><a href="/courselist/">Kursliste</a>  </span>
	<span><a href="/page/warum">Warum</a>  </span>      
	<span><a href="/page/darum">Darum</a>  </span>
	<span><a href="/page/links">Funny Links</a>  </span>
	<span><a href="/profile/">Mein Profil</a>  </span>
</template>


<template name="maincontent">

  <div id="maincontent">

{{#route_is "home"}}
    home boy
{{/route_is}}

{{#route_is "courselist"}}
	{{> courselist}}
{{/route_is}}

{{#route_is "coursedetails"}}
	{{> coursedetails}}
{{/route_is}}
     
{{#route_is "about"}}
         aboutttt
{{/route_is}}

{{#route_is "warum"}}
         waruum
{{/route_is}}

{{#route_is "darum"}}
         daruum
{{/route_is}}


{{#route_is "links"}}
         yaaaah
{{/route_is}}


{{#route_is "profile"}}
	{{> profile}}
{{/route_is}}
  </div>

  </template>

<template name="courselist">
  <div class="courselist">
    <h1>Kurse</h1>

    {{#each courses}}
      {{> course}}	
    {{/each}}
    
    {{> form}}
    
  </div>
</template>
  
<template name="course">
  <div class="course {{selected}} {{hoveredString}}">
    <span class="name">{{name}}</span>
     {{#if is_subscribed}}
    <span class="subscribed">Teilnehmer</span>
    {{/if}}
    {{#if is_organisator}}
    <span class="organisator">Organisator</span>
    {{/if}}
    <span class="score">{{score}}</span>
    <p class="smalldesc">
	    <span class="small">{{time_created}}</span>
	    <span class="small">{{time_changed}}</span>
	    <span class="small">{{createdby}}</span>
	    <span class="small">Subscribers:{{subscriber_count}}</span>
	    <span class="small">Orga:{{has_organisator}}</span>
	    <span class="small">Category: {{categories}}</span>
	   </p>
    </div>
</template>

<template name="coursedetails">

  <div id="coursedetails">
     
    {{#if isEditing}}
    <div class="popup">
    <h2>Kurs Editieren</h2>
     <p> Titel: <input type="text" id="editform_name" value="{{selected_name.name}}" size="40"/></p>
    
    <p>  Desc: <textarea cols="65" rows="10" id="editform_description" name="editform_description">{{selected_name.desc}}</textarea></p>
     <p>  Tags: <input type="text" id="editform_tags" value="{{selected_name.tags}}" size="40"/></p>

     <p>  Category: <input type="text" id="editform_category" value="{{selected_name.categories}}" size="30"/></p>
     <p> <input type="button" class="save" value="Save" /></p>

     <p> <input type="button" class="save" value="Save" /> <input type="button" class="cancel" value="Cancel" /></p>

      </div>
    {{/if}}

    {{#unless isEditing}}
    <div class="course_main">
     <h2 class="name">{{selected_name.name}}</h2>
     <p class="small"> Time Created: {{selected_name.time_created}},  Created by: {{selected_name.createdby}}, Category: {{selected_name.category}}</p>
     <p class="descr">{{selected_name.desc}}</p>

     <input type="button" class="edit" value="Edit" />     
     <input type="button" class="del" value="Delete" />
     </div>
    {{/unless}}
      
    <div class="participators">
    <h3>Participators</h3>
    
   <p> 
   Organisator:  
  {{#if organisator}}
   <span class="usernames">{{organisator}}</span>
	   {{#if isOrganisator}}
	  <span class="subscribed"> 
	  du bist Organisator!!!  
	  <input type="button" class="remove_organisator" value="Scheisse, Abmelden!!!!" /></span>
	    {{/if}}
   
         {{else}} <span class="usernames">Noch niemand</span>
      <span><input type="button" class="get_organisator" value="Ich kann das machen" />
           </span>
        {{/if}}
   
  </p>
   <p> Mentor:</p>
    <p>Teilnehmer: <span class="usernames">
        {{#if subscribers}}
        {{subscribers}}
        {{else}} 
        Noch niemand
        {{/if}}
        </span>
        
     {{#if isSubscribed}}
  <span class="subscribed"> 
  du bist angemeldet!!!  
  <input type="button" class="remove_subscriber" value="Abmelden!!!!" /></span>
    {{/if}}
    {{#unless isSubscribed}}
          <span><input type="button" class="get_subscriber" value="Ich melde mich an" />
           </span>
     {{/unless}}
    </p>
    </div>
    <p class="score"> Score: <a href="#">{{selected_name.score}}</a>        <input type="button" class="inc" value="Hochzaehlen" /></p>
  
    {{> commentDialog}}
    {{> messages}}
  
  </div>
</template>

<template name="commentDialog">
      {{#if showCommentDialog}}
	{{> write_message}}
      {{/if}}
    </template>
    
<template name="write_message">
  <div class="popup">
    <h3>write comment</h3>
      <form name="messageform">
        <input type="text" name="message_titel" /><br />
        <textarea cols="70" rows="5" name="message_text" /></textarea><br /><br />
        <input type="button" class="write" value="write!" /><input type="button" class="cancel" value="cancel" />
      </form>
  </div>
</template>

<template name="messages">
  <h3>discussion</h3>
  <input type ="button" class="showDialog" value="write Comment" />
  {{#each message}}
    <div class="message">
      <h4>{{message_title}}</h4>
      <p>{{message_text}}</p>
      <p>Zeit: {{message_time}}, User: {{user_ID}}, Kurs: {{course_ID}}</p>
      <form>
        <input type="button" class="answerbutton" value="answer this!" />
      </form>
    </div>
    {{#if answers}}
      {{#each this.answers}}
        <div class="answer">
          <h4>{{message_title}}</h4>
          <p>{{message_text}}</p>
	  <p>Zeit: {{message_time}}, User: {{user_ID}}, Kurs: {{course_ID}}</p>
        </div>
      {{/each}}
    {{/if}}
  {{/each}}
</template>

<template name="profile">

  <div id="profile">
    <h2 class="name">mein profil</h2>

    
    
    {{#if isEditing}}

        <p class="descr">ID: {{userdata.id}}</p>
        <p>Username: <input type="text" id="editform_username" value="{{userdata.username}}"/></p>
        <p> Email: <input type="text" id="editform_email" value="{{userdata.email}}"/></p>
        <p> Neues Passwort (optional):: <input type="password" id="editform_newpassword" value=""/></p>
      <input type="button" class="save" value="Save" />
    {{/if}}
    
    {{#unless isEditing}}
        <p class="descr">ID: {{userdata.id}}</p>
        <p class="descr">Username: {{userdata.username}}</p>
        <p class="descr">Email: {{userdata.email}}</p>
        
         
         <input type="button" class="edit" value="Edit" />
    {{/unless}}

    <h3>Meine Kurse:</h3>
    {{#each courses}}
      {{> course}}	
    {{/each}}

  </div>
  
</template>


<template name="comment">
  <div class="comment">
    <span class="user">{{user}}</span>
    <span class="comment_text">{{comment_text}}</span>
  </div>
</template>

<template name="comment_form">
 </br>
<textarea cols="70" rows="10" id="addcomment_text">schreibe hier deinen Kommentar hin</textarea>
    <input type="button" class="save" value="Send" />
</template>


<template name="form">
    
    <form>
    <h3>Add new</h3>
    <table>
        <tr>
            <th>Name: </th><td><input type="text" name="addform_name"/> </td>
        </tr>
        <tr>
            <th>Description: </th><td><textarea cols="30" rows="10" name="addform_description"></textarea> </td>
        </tr>
        <tr>
            <th></th><td><input type="button" class="add" value="Add new" /> </td>
        </tr>

    </table>
    </form>
</template>

<template name="jokes">

  <div id="jokes">
this is joke pagesdfsdf
  </div>
  
</template>

<template name="chat">
  <div id="chat">
    
      {{#if isShowingChat}}
        <input id="hide" type="button" value="Hide chat" />
        <input id="deleteChat" type="button" value="Clear chat" />


        <h2>Chat</h2>
        <table>
        <tr><th>Name: </th>
        <td>
        {{#if chatName}}
        
                {{#if isEditingChatName}}
                    <input id="chatName" value="{{chatName}}" />
                {{/if}}
                {{#unless isEditingChatName}}
                    <span id="editName">{{chatName}}</span>
                {{/unless}}
        {{/if}}
        
        {{#unless chatName}}
            <input id="chatName" />
        {{/unless}}
        </td>
        
        <tr>
            <th>Message: </th>
            <td><input id="message" /></td>
        </tr>
        <tr><th></th>
            <td><input id="send" type="button" value="Send" /></td>
        </tr>
        </table>
    
        <table>
        {{#each messages}}
          {{> message }}
        {{/each}}
        </table>
      {{/if}}
      
      {{#unless isShowingChat}}
          <input id="hide" type="button" value="Show chat" />
      {{/unless}}
      
  </div>
</template>


<template name="message">
  <tr><th title="{{sent}}">{{name}}:</th> <td>{{text}}</td></tr>
</template>



